<header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-slate-200">
  <div class="container flex items-center justify-between h-16">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2 font-semibold">
      <span class="inline-block h-6 w-6 rounded bg-orange-500"></span>
      <span>{{ site_contact.company_name|default:"ANNOOR" }}</span>
    </a>

    <!-- Nav -->
    <nav class="hidden md:flex items-center gap-6 text-sm">
      <a href="/" class="hover:text-slate-900 text-slate-600">Accueil</a>

      <!-- Mega menu (Services) — FIX hover gap + focus accessibility -->
      <div class="relative group">
        <button
          class="inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 focus:outline-none"
          aria-haspopup="true" aria-expanded="false">
          Services
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 opacity-70" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </button>

        <!-- wrapper absolu : top-full + pt-3 = pont hover (évite la fermeture quand on descend la souris) -->
        <div
          class="absolute left-1/2 top-full -translate-x-1/2 pt-3 w-[720px] z-50
                 opacity-0 -translate-y-2 pointer-events-none
                 transition duration-150
                 group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto
                 group-focus-within:opacity-100 group-focus-within:translate-y-0 group-focus-within:pointer-events-auto">

          <!-- panneau -->
          <div class="rounded-2xl border bg-white shadow-card p-6 grid grid-cols-3 gap-4">
            {% if nav_services %}
              {% for s in nav_services %}
                <a href="{{ s.get_absolute_url }}"
                   class="rounded-lg border p-4 hover:shadow-sm transition block focus:outline-none focus:ring-2 focus:ring-brand-500">
                  <div class="font-semibold">{{ s.title }}</div>
                  <p class="mt-1 text-xs text-slate-600 line-clamp-2">
                    {{ s.excerpt|default:s.body|striptags|truncatechars:90 }}
                  </p>
                </a>
              {% endfor %}
            {% else %}
              <div class="col-span-3 text-sm text-slate-600">
                Les services seront publiés prochainement.
              </div>
            {% endif %}

            <div class="col-span-3 text-right">
              <a href="/services/" class="inline-flex items-center gap-2 text-sm text-slate-700 hover:underline">
                Tous les services
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M13 5l7 7-7 7M5 12h14"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <a href="/projects/" class="hover:text-slate-900 text-slate-600">Références</a>
      <a href="/blog/" class="hover:text-slate-900 text-slate-600">Actualités</a>
      <a href="/about/" class="hover:text-slate-900 text-slate-600">À propos</a>
      <a href="/contact/" class="btn btn-primary">Devis</a>
    </nav>

    <!-- Burger -->
    <details class="md:hidden">
      <summary class="list-none cursor-pointer p-2 -mr-2 rounded hover:bg-slate-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-700" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 6h18M3 12h18M3 18h18"/>
        </svg>
      </summary>
      <div class="mt-2 rounded-2xl border bg-white shadow-card p-4 space-y-2">
        <a href="/" class="block px-2 py-2 rounded hover:bg-slate-50">Accueil</a>
        <a href="/services/" class="block px-2 py-2 rounded hover:bg-slate-50">Services</a>
        <a href="/projects/" class="block px-2 py-2 rounded hover:bg-slate-50">Références</a>
        <a href="/blog/" class="block px-2 py-2 rounded hover:bg-slate-50">Actualités</a>
        <a href="/about/" class="block px-2 py-2 rounded hover:bg-slate-50">À propos</a>
        <a href="/contact/" class="btn btn-primary w-full justify-center">Demander un devis</a>
      </div>
    </details>
  </div>
</header>
